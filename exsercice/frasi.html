<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sogang Grammar Master</title>
    <style>
        :root {
            --primary: #4a90e2;
            --error: #e74c3c;
            --success: #2ecc71;
            --dark: #2c3e50;
            --bg: #f4f7f6;
        }

        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); margin: 0; padding: 20px; color: var(--dark); }
        #app { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        h1 { text-align: center; color: var(--primary); border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        #italian-sentence { background: var(--dark); color: white; padding: 20px; border-radius: 10px; text-align: center; font-size: 1.4em; margin-bottom: 25px; }

        #korean-builder { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; min-height: 80px; padding: 20px; background: #fff; border: 2px dashed #cbd5e0; border-radius: 10px; margin-bottom: 20px; }
        
        .slot { display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .slot-label { font-size: 0.7em; color: #7f8c8d; text-transform: uppercase; }
        .word-box { min-width: 80px; height: 45px; border: 2px solid #edf2f7; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2em; background: #f8fafc; transition: all 0.3s; }
        .word-box.active { border-color: var(--primary); background: #ebf8ff; }
        .word-box.error-highlight { border-color: var(--error); background: #fff5f5; color: var(--error); }

        .options-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        .option-group { background: #f8fafc; padding: 12px; border-radius: 8px; border: 1px solid #e2e8f0; }
        .option-group h4 { margin: 0 0 10px 0; font-size: 0.85em; color: var(--primary); }
        
        .opt-btn { width: 100%; margin-bottom: 5px; padding: 8px; border: 1px solid #cbd5e0; border-radius: 4px; background: white; cursor: pointer; transition: 0.2s; }
        .opt-btn:hover { background: #edf2f7; }
        .opt-btn.selected { background: var(--primary); color: white; border-color: var(--primary); }

        #feedback { margin: 20px 0; padding: 15px; border-radius: 8px; display: none; text-align: center; font-weight: bold; }
        .show-feedback { display: block !important; }

        .controls { display: flex; justify-content: center; gap: 15px; margin-top: 30px; }
        .main-btn { padding: 12px 30px; border: none; border-radius: 25px; cursor: pointer; font-weight: bold; font-size: 1.1em; transition: 0.3s; }
        #check-btn { background: var(--primary); color: white; }
        #next-btn { background: var(--success); color: white; display: none; }
        .main-btn:disabled { background: #ccc; cursor: not-allowed; }
    </style>
</head>
<body>

<div id="app">
    <h1>Sogang Sentence Builder</h1>
    <div id="italian-sentence">...</div>
    
    <div id="korean-builder" id="builder">
        </div>

    <div id="feedback"></div>

    <div class="options-container" id="options">
        </div>

    <div class="controls">
        <button id="check-btn" class="main-btn" disabled>Controlla Risposta</button>
        <button id="next-btn" class="main-btn">Prossima Frase</button>
    </div>
</div>

<script>
        
    const LESSON_DATA = [
        // UNIT√Ä 1 & 2: Azioni quotidiane e Oggetti
        {
            it: "Oggi io mangio la mela.",
            structure: ["Soggetto", "P.Sogg", "Avverbio", "Oggetto", "P.Ogg", "Verbo"],
            correct: ["Ï†Ä", "Îäî", "Ïò§Îäò", "ÏÇ¨Í≥º", "Î•º", "Î®πÏñ¥Ïöî"],
            options: {
                "Soggetto": ["Ï†Ä", "ÏπúÍµ¨", "ÎèôÏÉù"], "P.Sogg": ["Îäî", "ÏùÄ", "Í∞Ä", "Ïù¥"],
                "Avverbio": ["Ïò§Îäò", "ÎÇ¥Ïùº", "ÏßÄÍ∏à"], "Oggetto": ["ÏÇ¨Í≥º", "Ï±Ö", "Î∞•"],
                "P.Ogg": ["Î•º", "ÏùÑ"], "Verbo": ["Î®πÏñ¥Ïöî", "ÏùΩÏñ¥Ïöî", "ÏÇ¨Ïöî"]
            }
        },
        {
            it: "Minsu legge un libro in biblioteca.",
            structure: ["Soggetto", "P.Sogg", "Luogo", "P.Luogo", "Oggetto", "P.Ogg", "Verbo"],
            correct: ["ÎØºÏàò", "Îäî", "ÎèÑÏÑúÍ¥Ä", "ÏóêÏÑú", "Ï±Ö", "ÏùÑ", "ÏùΩÏñ¥Ïöî"],
            options: {
                "Soggetto": ["ÎØºÏàò", "ÏòÅÎØ∏", "Ï†Ä"], "P.Sogg": ["Îäî", "ÏùÄ", "Í∞Ä", "Ïù¥"],
                "Luogo": ["ÎèÑÏÑúÍ¥Ä", "ÌïôÍµê", "Ïßë"], "P.Luogo": ["ÏóêÏÑú", "Ïóê"],
                "Oggetto": ["Ï±Ö", "Î¨º", "ÏÇ¨Í≥º"], "P.Ogg": ["ÏùÑ", "Î•º"],
                "Verbo": ["ÏùΩÏñ¥Ïöî", "Í≥µÎ∂ÄÌï¥Ïöî", "ÏÇ¨Ïöî"]
            }
        },
        // UNIT√Ä 3: Luoghi e Movimento
        {
            it: "Domani vado al mercato.",
            structure: ["Avverbio", "Soggetto", "P.Sogg", "Luogo", "P.Luogo", "Verbo"],
            correct: ["ÎÇ¥Ïùº", "Ï†Ä", "Îäî", "ÏãúÏû•", "Ïóê", "Í∞ÄÏöî"],
            options: {
                "Avverbio": ["ÎÇ¥Ïùº", "Ïò§Îäò", "Ïñ¥Ï†ú"], "Soggetto": ["Ï†Ä", "Ïö∞Î¶¨", "ÎèôÏÉù"],
                "P.Sogg": ["Îäî", "ÏùÄ", "Í∞Ä", "Ïù¥"], "Luogo": ["ÏãúÏû•", "Î∞±ÌôîÏ†ê", "Í≥µÏõê"],
                "P.Luogo": ["Ïóê", "ÏóêÏÑú"], "Verbo": ["Í∞ÄÏöî", "ÏôÄÏöî", "ÏûàÏñ¥Ïöî"]
            }
        },
        {
            it: "Il mio amico compra il pane al negozio.",
            structure: ["Soggetto", "P.Sogg", "Luogo", "P.Luogo", "Oggetto", "P.Ogg", "Verbo"],
            correct: ["ÏπúÍµ¨", "Í∞Ä", "Í∞ÄÍ≤å", "ÏóêÏÑú", "Îπµ", "ÏùÑ", "ÏÇ¨Ïöî"],
            options: {
                "Soggetto": ["ÏπúÍµ¨", "Ïñ∏Îãà", "Ìòï"], "P.Sogg": ["Í∞Ä", "Ïù¥", "Îäî", "ÏùÄ"],
                "Luogo": ["Í∞ÄÍ≤å", "Ìé∏ÏùòÏ†ê", "ÏãùÎãπ"], "P.Luogo": ["ÏóêÏÑú", "Ïóê"],
                "Oggetto": ["Îπµ", "Ïö∞Ïú†", "Ïª§Ìîº"], "P.Ogg": ["ÏùÑ", "Î•º"],
                "Verbo": ["ÏÇ¨Ïöî", "ÎßàÏÖîÏöî", "ÎßåÎì§Ïñ¥Ïöî"]
            }
        },
        // UNIT√Ä 4: Studio e Tempo libero
        {
            it: "Adesso io studio coreano a casa.",
            structure: ["Avverbio", "Soggetto", "P.Sogg", "Luogo", "P.Luogo", "Oggetto", "P.Ogg", "Verbo"],
            correct: ["ÏßÄÍ∏à", "Ï†Ä", "Îäî", "Ïßë", "ÏóêÏÑú", "ÌïúÍµ≠Ïñ¥", "Î•º", "Í≥µÎ∂ÄÌï¥Ïöî"],
            options: {
                "Avverbio": ["ÏßÄÍ∏à", "Ìï≠ÏÉÅ", "ÏûêÏ£º"], "Soggetto": ["Ï†Ä", "ÎÇò", "ÌïôÏÉù"],
                "P.Sogg": ["Îäî", "ÏùÄ", "Í∞Ä", "Ïù¥"], "Luogo": ["Ïßë", "ÍµêÏã§", "Î∞©"],
                "P.Luogo": ["ÏóêÏÑú", "Ïóê"], "Oggetto": ["ÌïúÍµ≠Ïñ¥", "ÏòÅÏñ¥", "ÏàòÌïô"],
                "P.Ogg": ["Î•º", "ÏùÑ"], "Verbo": ["Í≥µÎ∂ÄÌï¥Ïöî", "Ìï¥Ïöî", "Í∞ÄÎ•¥Ï≥êÏöî"]
            }
        },
        {
            it: "L'insegnante beve il t√® in ufficio.",
            structure: ["Soggetto", "P.Sogg", "Luogo", "P.Luogo", "Oggetto", "P.Ogg", "Verbo"],
            correct: ["ÏÑ†ÏÉùÎãò", "Ïù¥", "ÏÇ¨Î¨¥Ïã§", "ÏóêÏÑú", "Ï∞®", "Î•º", "ÎßàÏÖîÏöî"],
            options: {
                "Soggetto": ["ÏÑ†ÏÉùÎãò", "ÏöîÎ¶¨ÏÇ¨", "ÏùòÏÇ¨"], "P.Sogg": ["Ïù¥", "Í∞Ä", "ÏùÄ", "Îäî"],
                "Luogo": ["ÏÇ¨Î¨¥Ïã§", "Ïª§ÌîºÏàç", "ÏãùÎãπ"], "P.Luogo": ["ÏóêÏÑú", "Ïóê"],
                "Oggetto": ["Ï∞®", "Ïª§Ìîº", "ÏΩúÎùº"], "P.Ogg": ["Î•º", "ÏùÑ"],
                "Verbo": ["ÎßàÏÖîÏöî", "ÎßàÏÖîÏöî", "Ï§òÏöî"]
            }
        },
        {
            it: "Minsu incontra un amico al cinema.",
            structure: ["Soggetto", "P.Sogg", "Luogo", "P.Luogo", "Oggetto", "P.Ogg", "Verbo"],
            correct: ["ÎØºÏàò", "Îäî", "ÏòÅÌôîÍ¥Ä", "ÏóêÏÑú", "ÏπúÍµ¨", "Î•º", "ÎßåÎÇòÏöî"],
            options: {
                "Soggetto": ["ÎØºÏàò", "ÏòÅÎØ∏", "ÎèôÏÉù"], "P.Sogg": ["Îäî", "ÏùÄ", "Í∞Ä", "Ïù¥"],
                "Luogo": ["ÏòÅÌôîÍ¥Ä", "Î∞±ÌôîÏ†ê", "ÌïôÍµê"], "P.Luogo": ["ÏóêÏÑú", "Ïóê"],
                "Oggetto": ["ÏπúÍµ¨", "ÏÑ†ÏÉùÎãò", "ÎèôÏÉù"], "P.Ogg": ["Î•º", "ÏùÑ"],
                "Verbo": ["ÎßåÎÇòÏöî", "Î¥êÏöî", "Í∏∞Îã§Î†§Ïöî"]
            }
        },
        {
            it: "Oggi io compro i vestiti al centro commerciale.",
            structure: ["Avverbio", "Soggetto", "P.Sogg", "Luogo", "P.Luogo", "Oggetto", "P.Ogg", "Verbo"],
            correct: ["Ïò§Îäò", "Ï†Ä", "Îäî", "Î∞±ÌôîÏ†ê", "ÏóêÏÑú", "Ïò∑", "ÏùÑ", "ÏÇ¨Ïöî"],
            options: {
                "Avverbio": ["Ïò§Îäò", "ÎÇ¥Ïùº", "Ìï≠ÏÉÅ"], "Soggetto": ["Ï†Ä", "ÏπúÍµ¨", "Ïö∞Î¶¨"],
                "P.Sogg": ["Îäî", "ÏùÄ", "Í∞Ä", "Ïù¥"], "Luogo": ["Î∞±ÌôîÏ†ê", "ÏãúÏû•", "Í∞ÄÍ≤å"],
                "P.Luogo": ["ÏóêÏÑú", "Ïóê"], "Oggetto": ["Ïò∑", "Í∞ÄÎ∞©", "Íµ¨Îëê"],
                "P.Ogg": ["ÏùÑ", "Î•º"], "Verbo": ["ÏÇ¨Ïöî", "Íµ¨Í≤ΩÌï¥Ïöî", "ÌåîÏïÑÏöî"]
            }
        },
        {
            it: "Mio fratello dorme a casa.",
            structure: ["Soggetto", "P.Sogg", "Luogo", "P.Luogo", "Verbo"],
            correct: ["Ïò§Îπ†", "Í∞Ä", "Ïßë", "ÏóêÏÑú", "ÏûêÏöî"],
            options: {
                "Soggetto": ["Ïò§Îπ†", "Ìòï", "ÎÇ®ÎèôÏÉù"], "P.Sogg": ["Í∞Ä", "Ïù¥", "Îäî", "ÏùÄ"],
                "Luogo": ["Ïßë", "Î∞©", "Í±∞Ïã§"], "P.Luogo": ["ÏóêÏÑú", "Ïóê"],
                "Verbo": ["ÏûêÏöî", "Ïâ¨Ïñ¥Ïöî", "ÏûàÏñ¥Ïöî"]
            }
        },
        {
            it: "Io guardo un film a casa.",
            structure: ["Soggetto", "P.Sogg", "Luogo", "P.Luogo", "Oggetto", "P.Ogg", "Verbo"],
            correct: ["Ï†Ä", "Îäî", "Ïßë", "ÏóêÏÑú", "ÏòÅÌôî", "Î•º", "Î¥êÏöî"],
            options: {
                "Soggetto": ["Ï†Ä", "ÎÇò", "ÏπúÍµ¨"], "P.Sogg": ["Îäî", "ÏùÄ", "Í∞Ä", "Ïù¥"],
                "Luogo": ["Ïßë", "Î∞©", "ÏòÅÌôîÍ¥Ä"], "P.Luogo": ["ÏóêÏÑú", "Ïóê"],
                "Oggetto": ["ÏòÅÌôî", "ÎìúÎùºÎßà", "Îâ¥Ïä§"], "P.Ogg": ["Î•º", "ÏùÑ"],
                "Verbo": ["Î¥êÏöî", "Îì§Ïñ¥Ïöî", "Ìï¥Ïöî"]
            }
        },
        {
            it: "Il gatto √® sopra il tavolo.",
            structure: ["Soggetto", "P.Sogg", "Luogo", "Posizione", "P.Luogo", "Verbo"],
            correct: ["Í≥†ÏñëÏù¥", "Í∞Ä", "Ï±ÖÏÉÅ", "ÏúÑ", "Ïóê", "ÏûàÏñ¥Ïöî"],
            options: {
                "Soggetto": ["Í≥†ÏñëÏù¥", "Í∞ïÏïÑÏßÄ", "Ï±Ö"], "P.Sogg": ["Í∞Ä", "Ïù¥", "Îäî", "ÏùÄ"],
                "Luogo": ["Ï±ÖÏÉÅ", "Ïπ®ÎåÄ", "ÏùòÏûê"], "Posizione": ["ÏúÑ", "Î∞ë", "ÏòÜ"],
                "P.Luogo": ["Ïóê", "ÏóêÏÑú"], "Verbo": ["ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Í∞ÄÏöî"]
            }
        },
        {
            it: "Minsu lavora in banca.",
            structure: ["Soggetto", "P.Sogg", "Luogo", "P.Luogo", "Verbo"],
            correct: ["ÎØºÏàò", "Îäî", "ÏùÄÌñâ", "ÏóêÏÑú", "ÏùºÌï¥Ïöî"],
            options: {
                "Soggetto": ["ÎØºÏàò", "ÏòÅÎØ∏", "ÏïÑÎ≤ÑÏßÄ"], "P.Sogg": ["Îäî", "ÏùÄ", "Í∞Ä", "Ïù¥"],
                "Luogo": ["ÏùÄÌñâ", "ÌöåÏÇ¨", "Î≥ëÏõê"], "P.Luogo": ["ÏóêÏÑú", "Ïóê"],
                "Verbo": ["ÏùºÌï¥Ïöî", "Í≥µÎ∂ÄÌï¥Ïöî", "Ïö¥ÎèôÌï¥Ïöî"]
            }
        }
    ];


    

    let currentIdx = 0;
    let userSelections = [];

    function loadSentence() {
        const data = LESSON_DATA[currentIdx];
        document.getElementById('italian-sentence').textContent = data.it;
        userSelections = new Array(data.structure.length).fill(null);
        
        // Reset UI
        document.getElementById('feedback').className = '';
        document.getElementById('next-btn').style.display = 'none';
        document.getElementById('check-btn').style.display = 'inline-block';
        document.getElementById('check-btn').disabled = true;
        
        renderBuilder();
        renderOptions();
    }

    function renderBuilder() {
        const builder = document.getElementById('korean-builder');
        builder.innerHTML = '';
        const data = LESSON_DATA[currentIdx];
        
        data.structure.forEach((label, i) => {
            const div = document.createElement('div');
            div.className = 'slot';
            div.innerHTML = `
                <span class="slot-label">${label}</span>
                <div class="word-box" id="box-${i}">${userSelections[i] || ''}</div>
            `;
            builder.appendChild(div);
        });
    }

    function renderOptions() {
        const container = document.getElementById('options');
        container.innerHTML = '';
        const data = LESSON_DATA[currentIdx];
        
        data.structure.forEach((type, slotIdx) => {
            const group = document.createElement('div');
            group.className = 'option-group';
            group.innerHTML = `<h4>${type}</h4>`;
            
            data.options[type].forEach(val => {
                const btn = document.createElement('button');
                btn.className = `opt-btn ${userSelections[slotIdx] === val ? 'selected' : ''}`;
                btn.textContent = val;
                btn.onclick = () => selectWord(slotIdx, val);
                group.appendChild(btn);
            });
            container.appendChild(group);
        });
    }

    function selectWord(idx, val) {
        userSelections[idx] = val;
        renderBuilder();
        renderOptions();
        
        const isComplete = userSelections.every(s => s !== null);
        document.getElementById('check-btn').disabled = !isComplete;
    }

    function checkAnswer() {
        const data = LESSON_DATA[currentIdx];
        const feedback = document.getElementById('feedback');
        let errors = [];

        userSelections.forEach((choice, i) => {
            const box = document.getElementById(`box-${i}`);
            box.classList.remove('error-highlight');
            
            if (choice !== data.correct[i]) {
                box.classList.add('error-highlight');
                errors.push(data.structure[i]);
            }
        });

        if (errors.length === 0) {
            feedback.textContent = "Eccellente! Frase perfetta. üéâ";
            feedback.className = "show-feedback success-msg"; // (Stili nel CSS aggiornati)
            feedback.style.color = "var(--success)";
            document.getElementById('check-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'inline-block';
        } else {
            feedback.innerHTML = `C'√® un errore! Controlla questi elementi: <br> ‚ö†Ô∏è <strong>${[...new Set(errors)].join(', ')}</strong>`;
            feedback.className = "show-feedback error-msg";
            feedback.style.color = "var(--error)";
        }
    }

    document.getElementById('check-btn').onclick = checkAnswer;
    document.getElementById('next-btn').onclick = () => {
        currentIdx = (currentIdx + 1) % LESSON_DATA.length;
        loadSentence();
    };

    loadSentence();
</script>
</body>
</html>
