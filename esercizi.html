<!doctype html>
<html lang="it" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Esercizi Coreano</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&amp;family=Quicksand:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    .font-korean {
      font-family: 'Noto Sans KR', sans-serif;
    }
    .drag-item {
      cursor: grab;
      user-select: none;
      touch-action: none;
      transition: transform 0.15s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.15s ease;
    }
    .drag-item:active,
    .drag-item.dragging {
      cursor: grabbing;
      transform: scale(1.08) !important;
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
      z-index: 1000;
    }
    .drop-zone {
      min-height: 60px;
      transition: all 0.15s ease;
      position: relative;
    }
    .drop-zone.drag-over {
      transform: scale(1.02);
      box-shadow: inset 0 0 12px rgba(233, 69, 96, 0.3);
    }
    .particle-tag {
      font-size: 0.65rem;
      padding: 2px 6px;
      border-radius: 4px;
      position: absolute;
      top: -8px;
      right: -4px;
    }
    @keyframes bounce-in {
      0% { transform: scale(0.8); opacity: 0; }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); opacity: 1; }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    .animate-bounce-in {
      animation: bounce-in 0.4s ease-out;
    }
    .animate-shake {
      animation: shake 0.4s ease-out;
    }
    .progress-bar {
      transition: width 0.5s ease-out;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full font-korean">
  <div id="app-container" class="h-full overflow-auto">
   <div class="min-h-full p-4 md:p-8">
    <div class="max-w-2xl mx-auto"><!-- Header -->
     <header class="text-center mb-8">
      <h1 id="main-title" class="text-2xl md:text-3xl font-bold mb-2">Esercizi di Coreano</h1>
      <p class="text-sm opacity-80">Costruzione delle frasi con particelle e verbo essere</p>
     </header><!-- Progress -->
     <div class="mb-6">
      <div class="flex justify-between text-sm mb-2"><span>Progresso</span> <span id="progress-text">0 / 8</span>
      </div>
      <div class="h-3 rounded-full overflow-hidden" style="background: rgba(255,255,255,0.3);">
       <div id="progress-bar" class="progress-bar h-full rounded-full" style="width: 0%;"></div>
      </div>
     </div><!-- Score -->
     <div class="flex justify-center gap-6 mb-6 text-center">
      <div class="px-4 py-2 rounded-lg" style="background: rgba(255,255,255,0.2);">
       <div class="text-2xl font-bold" id="correct-count">
        0
       </div>
       <div class="text-xs">
        Corrette
       </div>
      </div>
      <div class="px-4 py-2 rounded-lg" style="background: rgba(255,255,255,0.2);">
       <div class="text-2xl font-bold" id="wrong-count">
        0
       </div>
       <div class="text-xs">
        Sbagliate
       </div>
      </div>
     </div><!-- Exercise Card -->
     <div id="exercise-card" class="rounded-2xl p-6 mb-6 shadow-xl"><!-- Particle Legend -->
      <div id="particle-legend" class="mb-4 p-3 rounded-lg text-xs">
       <div class="font-bold mb-2">
        üìö Particelle:
       </div>
       <div class="grid grid-cols-2 md:grid-cols-3 gap-2"><span><strong>ÏùÄ/Îäî</strong> - Soggetto (tema)</span> <span><strong>Ïù¥/Í∞Ä</strong> - Soggetto</span> <span><strong>ÏùÑ/Î•º</strong> - Oggetto</span> <span><strong>Ïóê</strong> - Luogo/Tempo</span> <span><strong>ÏóêÏÑú</strong> - Luogo (azione)</span> <span><strong>Ïùò</strong> - Possesso</span>
       </div>
      </div><!-- Question -->
      <div class="mb-4">
       <div class="text-sm opacity-70 mb-1">
        Traduci in coreano:
       </div>
       <div id="question-text" class="text-xl font-semibold"></div>
      </div><!-- Hint -->
      <div id="hint-box" class="mb-4 p-3 rounded-lg text-sm" style="background: rgba(255,255,255,0.1);"><span class="font-bold">üí° Suggerimento:</span> <span id="hint-text"></span>
      </div><!-- Drop Zone -->
      <div class="mb-4">
       <div class="text-sm opacity-70 mb-2">
        Costruisci la frase (trascina le parole):
       </div>
       <div id="drop-zone" class="drop-zone rounded-xl p-4 flex flex-wrap gap-2 min-h-16 border-2 border-dashed" style="border-color: rgba(255,255,255,0.3);"><span class="opacity-50 text-sm" id="drop-placeholder">Trascina qui le parole...</span>
       </div>
      </div><!-- Word Bank -->
      <div class="mb-4">
       <div class="text-sm opacity-70 mb-2">
        Parole disponibili:
       </div>
       <div id="word-bank" class="flex flex-wrap gap-2 min-h-12 p-2 rounded-lg" style="background: rgba(255,255,255,0.1);"></div>
      </div><!-- Feedback -->
      <div id="feedback" class="hidden text-center p-4 rounded-xl mb-4 font-bold text-lg"></div><!-- Explanation -->
      <div id="explanation" class="hidden p-4 rounded-lg text-sm mb-4"></div><!-- Buttons -->
      <div class="flex gap-3 justify-center"><button id="check-btn" class="px-6 py-3 rounded-xl font-bold transition-all hover:scale-105 active:scale-95"> Verifica ‚úì </button> <button id="reset-btn" class="px-6 py-3 rounded-xl font-bold transition-all hover:scale-105 active:scale-95" style="background: rgba(255,255,255,0.2);"> Riprova ‚Ü∫ </button> <button id="next-btn" class="hidden px-6 py-3 rounded-xl font-bold transition-all hover:scale-105 active:scale-95"> Prossimo ‚Üí </button>
      </div>
     </div><!-- Completion Screen -->
     <div id="completion-screen" class="hidden rounded-2xl p-8 text-center shadow-xl">
      <div class="text-6xl mb-4">
       üéä
      </div>
      <h2 class="text-2xl font-bold mb-2">Complimenti!</h2>
      <p class="mb-4">Hai completato tutti gli esercizi!</p>
      <div class="text-4xl font-bold mb-2" id="final-score">
       0/8
      </div>
      <p class="text-sm opacity-70 mb-6">Risposte corrette</p><button id="restart-btn" class="px-8 py-3 rounded-xl font-bold transition-all hover:scale-105 active:scale-95"> Ricomincia üîÑ </button>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      app_title: 'Esercizi di Coreano',
      correct_message: 'Corretto! üéâ',
      incorrect_message: 'Riprova! üí™',
      background_color: '#1a1a2e',
      surface_color: '#16213e',
      text_color: '#eaeaea',
      primary_action_color: '#e94560',
      secondary_action_color: '#0f3460'
    };

    let config = { ...defaultConfig };

    const exercises = [
      {
        italian: "Io sono uno studente.",
        korean: ["Ï†Ä", "Îäî", "ÌïôÏÉù", "Ïù¥ÏóêÏöî"],
        words: ["Ï†Ä", "Îäî", "ÌïôÏÉù", "Ïù¥ÏóêÏöî", "ÏùÑ", "ÏóêÏÑú"],
        particles: { "Îäî": "sogg", "Ïù¥ÏóêÏöî": "essere" },
        hint: "Ï†Ä = io, ÌïôÏÉù = studente, Îäî = particella tema, Ïù¥ÏóêÏöî = sono/√®",
        explanation: "Ï†ÄÎäî ÌïôÏÉùÏù¥ÏóêÏöî - 'Îäî' marca il tema della frase, 'Ïù¥ÏóêÏöî' √® il verbo essere per parole che finiscono in consonante."
      },
      {
        italian: "Il gatto √® a casa.",
        korean: ["Í≥†ÏñëÏù¥", "Í∞Ä", "Ïßë", "Ïóê", "ÏûàÏñ¥Ïöî"],
        words: ["Í≥†ÏñëÏù¥", "Í∞Ä", "Ïßë", "Ïóê", "ÏûàÏñ¥Ïöî", "Îäî", "Î•º"],
        particles: { "Í∞Ä": "sogg", "Ïóê": "luogo", "ÏûàÏñ¥Ïöî": "esiste" },
        hint: "Í≥†ÏñëÏù¥ = gatto, Ïßë = casa, Ïóê = a/in (luogo), ÏûàÏñ¥Ïöî = c'√®/esiste",
        explanation: "Í≥†ÏñëÏù¥Í∞Ä ÏßëÏóê ÏûàÏñ¥Ïöî - 'Í∞Ä' marca il soggetto, 'Ïóê' indica il luogo statico, 'ÏûàÏñ¥Ïöî' significa 'c'√®/esiste'."
      },
      {
        italian: "Studio coreano a scuola.",
        korean: ["ÌïôÍµê", "ÏóêÏÑú", "ÌïúÍµ≠Ïñ¥", "Î•º", "Í≥µÎ∂ÄÌï¥Ïöî"],
        words: ["ÌïôÍµê", "ÏóêÏÑú", "ÌïúÍµ≠Ïñ¥", "Î•º", "Í≥µÎ∂ÄÌï¥Ïöî", "Ïóê", "Ïù¥"],
        particles: { "ÏóêÏÑú": "luogo-az", "Î•º": "oggetto" },
        hint: "ÌïôÍµê = scuola, ÏóêÏÑú = a/in (azione), ÌïúÍµ≠Ïñ¥ = coreano, Î•º = particella oggetto",
        explanation: "ÌïôÍµêÏóêÏÑú ÌïúÍµ≠Ïñ¥Î•º Í≥µÎ∂ÄÌï¥Ïöî - 'ÏóêÏÑú' indica il luogo dove avviene un'azione, 'Î•º' marca l'oggetto diretto."
      },
      {
        italian: "Questo √® il libro di mia madre.",
        korean: ["Ïù¥Í≤É", "ÏùÄ", "Ïñ¥Î®∏Îãà", "Ïùò", "Ï±Ö", "Ïù¥ÏóêÏöî"],
        words: ["Ïù¥Í≤É", "ÏùÄ", "Ïñ¥Î®∏Îãà", "Ïùò", "Ï±Ö", "Ïù¥ÏóêÏöî", "Í∞Ä", "Î•º"],
        particles: { "ÏùÄ": "sogg", "Ïùò": "poss", "Ïù¥ÏóêÏöî": "essere" },
        hint: "Ïù¥Í≤É = questo, Ïñ¥Î®∏Îãà = madre, Ïùò = di (possesso), Ï±Ö = libro",
        explanation: "Ïù¥Í≤ÉÏùÄ Ïñ¥Î®∏ÎãàÏùò Ï±ÖÏù¥ÏóêÏöî - 'Ïùò' indica il possesso (come 'di' in italiano)."
      },
      {
        italian: "L'amico √® coreano.",
        korean: ["ÏπúÍµ¨", "Îäî", "ÌïúÍµ≠", "ÏÇ¨Îûå", "Ïù¥ÏóêÏöî"],
        words: ["ÏπúÍµ¨", "Îäî", "ÌïúÍµ≠", "ÏÇ¨Îûå", "Ïù¥ÏóêÏöî", "Í∞Ä", "Ïóê"],
        particles: { "Îäî": "sogg", "Ïù¥ÏóêÏöî": "essere" },
        hint: "ÏπúÍµ¨ = amico, ÌïúÍµ≠ ÏÇ¨Îûå = persona coreana, Îäî = tema",
        explanation: "ÏπúÍµ¨Îäî ÌïúÍµ≠ ÏÇ¨ÎûåÏù¥ÏóêÏöî - Il soggetto √® marcato con 'Îäî', ÌïúÍµ≠ ÏÇ¨Îûå significa 'persona coreana'."
      },
      {
        italian: "Mangio la mela.",
        korean: ["ÏÇ¨Í≥º", "Î•º", "Î®πÏñ¥Ïöî"],
        words: ["ÏÇ¨Í≥º", "Î•º", "Î®πÏñ¥Ïöî", "ÏùÄ", "ÏóêÏÑú", "Í∞Ä"],
        particles: { "Î•º": "oggetto" },
        hint: "ÏÇ¨Í≥º = mela, Î•º = oggetto, Î®πÏñ¥Ïöî = mangio",
        explanation: "ÏÇ¨Í≥ºÎ•º Î®πÏñ¥Ïöî - 'Î•º' marca l'oggetto diretto (la mela che viene mangiata)."
      },
      {
        italian: "Il caff√® √® sul tavolo.",
        korean: ["Ïª§Ìîº", "Í∞Ä", "ÌÖåÏù¥Î∏î", "ÏúÑ", "Ïóê", "ÏûàÏñ¥Ïöî"],
        words: ["Ïª§Ìîº", "Í∞Ä", "ÌÖåÏù¥Î∏î", "ÏúÑ", "Ïóê", "ÏûàÏñ¥Ïöî", "Îäî", "Î•º"],
        particles: { "Í∞Ä": "sogg", "Ïóê": "luogo", "ÏûàÏñ¥Ïöî": "esiste" },
        hint: "Ïª§Ìîº = caff√®, ÌÖåÏù¥Î∏î = tavolo, ÏúÑ = sopra, Ïóê = a/in",
        explanation: "Ïª§ÌîºÍ∞Ä ÌÖåÏù¥Î∏î ÏúÑÏóê ÏûàÏñ¥Ïöî - 'ÏúÑÏóê' significa 'su/sopra', 'ÏûàÏñ¥Ïöî' indica esistenza/presenza."
      },
      {
        italian: "Non sono un insegnante.",
        korean: ["Ï†Ä", "Îäî", "ÏÑ†ÏÉùÎãò", "Ïù¥", "ÏïÑÎãàÏóêÏöî"],
        words: ["Ï†Ä", "Îäî", "ÏÑ†ÏÉùÎãò", "Ïù¥", "ÏïÑÎãàÏóêÏöî", "Í∞Ä", "Î•º"],
        particles: { "Îäî": "sogg", "Ïù¥": "sogg", "ÏïÑÎãàÏóêÏöî": "non-essere" },
        hint: "ÏÑ†ÏÉùÎãò = insegnante, ÏïÑÎãàÏóêÏöî = non sono/non √®",
        explanation: "Ï†ÄÎäî ÏÑ†ÏÉùÎãòÏù¥ ÏïÑÎãàÏóêÏöî - 'ÏïÑÎãàÏóêÏöî' √® la forma negativa del verbo essere, 'Ïù¥' marca il complemento predicativo."
      },
      {
        italian: "Ho tre libri.",
        korean: ["Ï±Ö", "Ïù¥", "ÏÑ∏", "Í∂å", "ÏûàÏñ¥Ïöî"],
        words: ["Ï±Ö", "Ïù¥", "ÏÑ∏", "Í∂å", "ÏûàÏñ¥Ïöî", "Î•º", "Ïóê"],
        particles: { "Ïù¥": "sogg", "Í∂å": "classif" },
        hint: "Ï±Ö = libro, ÏÑ∏ = tre, Í∂å = classificatore per libri, ÏûàÏñ¥Ïöî = ho/ci sono",
        explanation: "Ï±ÖÏù¥ ÏÑ∏ Í∂å ÏûàÏñ¥Ïöî - 'Í∂å' √® il classificatore per i libri. In coreano si usa sempre un classificatore con i numeri (Í∂å per libri, Î™Ö per persone, Í∞ú per oggetti generici)."
      },
      {
        italiano: "Ci sono cinque persone.",
        korean: ["ÏÇ¨Îûå", "Ïù¥", "Îã§ÏÑØ", "Î™Ö", "ÏûàÏñ¥Ïöî"],
        words: ["ÏÇ¨Îûå", "Ïù¥", "Îã§ÏÑØ", "Î™Ö", "ÏûàÏñ¥Ïöî", "Í∞Ä", "Î•º"],
        particles: { "Ïù¥": "sogg", "Î™Ö": "classif" },
        hint: "ÏÇ¨Îûå = persona, Îã§ÏÑØ = cinque, Î™Ö = classificatore per persone, ÏûàÏñ¥Ïöî = ci sono",
        explanation: "ÏÇ¨ÎûåÏù¥ Îã§ÏÑØ Î™Ö ÏûàÏñ¥Ïöî - 'Î™Ö' √® il classificatore per le persone. Quando contiamo persone in coreano, usiamo sempre 'Î™Ö'."
      },
      {
        italian: "Compro due tazze di caff√®.",
        korean: ["Ïª§Ìîº", "Î•º", "Îëê", "Ïûî", "ÏÇ¨Ïöî"],
        words: ["Ïª§Ìîº", "Î•º", "Îëê", "Ïûî", "ÏÇ¨Ïöî", "Ïù¥", "Ïóê"],
        particles: { "Î•º": "oggetto", "Ïûî": "classif" },
        hint: "Ïª§Ìîº = caff√®, Î•º = particella oggetto, Îëê = due, Ïûî = classificatore per tazze/bicchieri",
        explanation: "Ïª§ÌîºÎ•º Îëê Ïûî ÏÇ¨Ïöî - 'Ïûî' √® il classificatore per tazze, bicchieri e tazze di bevande. Il classificatore va sempre dopo il numero e l'oggetto."
      },
      {
        italian: "Ci sono dieci studenti nella classe.",
        korean: ["ÍµêÏã§", "Ïóê", "ÌïôÏÉù", "Ïù¥", "Ïó¥", "Î™Ö", "ÏûàÏñ¥Ïöî"],
        words: ["ÍµêÏã§", "Ïóê", "ÌïôÏÉù", "Ïù¥", "Ïó¥", "Î™Ö", "ÏûàÏñ¥Ïöî", "Î•º", "Îäî"],
        particles: { "Ïóê": "luogo", "Ïù¥": "sogg", "Î™Ö": "classif" },
        hint: "ÍµêÏã§ = classe, Ïóê = in (luogo), ÌïôÏÉù = studente, Ïó¥ = dieci, Î™Ö = classificatore per persone",
        explanation: "ÍµêÏã§Ïóê ÌïôÏÉùÏù¥ Ïó¥ Î™Ö ÏûàÏñ¥Ïöî - Con i numeri e i conteggi, il classificatore (Î™Ö) viene dopo il numero. La struttura √®: luogo + particella Ïóê + oggetto + particella Ïù¥ + numero + classificatore + verbo."
      },
    {
    italian: "Ci sono studenti nell'aula.",
    korean: ["ÍµêÏã§", "Ïóê", "ÌïôÏÉù", "Ïù¥", "ÏûàÏñ¥Ïöî"],
    words: ["ÍµêÏã§", "Ïóê", "ÌïôÏÉù", "Ïù¥", "Ïó¥", "Î™Ö", "ÏûàÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïóê": "luogo", "Ïù¥": "sogg" },
    hint: "ÍµêÏã§ = aula/classe, Ïóê = in (luogo), ÌïôÏÉù = studente, ÏûàÏñ¥Ïöî = c'√®/ci sono",
    explanation: "ÍµêÏã§Ïóê ÌïôÏÉùÏù¥ ÏûàÏñ¥Ïöî - Struttura: luogo + Ïóê + soggetto + Ïù¥/Í∞Ä + ÏûàÏñ¥Ïöî (c'√® / ci sono)."
  },
  {
    italian: "Ci sono dieci studenti nell'aula.",
    korean: ["ÍµêÏã§", "Ïóê", "ÌïôÏÉù", "Ïù¥", "Ïó¥", "Î™Ö", "ÏûàÏñ¥Ïöî"],
    words: ["ÍµêÏã§", "Ïóê", "ÌïôÏÉù", "Ïù¥", "Ïó¥", "Î™Ö", "ÏûàÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïóê": "luogo", "Ïù¥": "sogg", "Î™Ö": "classif" },
    hint: "ÍµêÏã§ = aula/classe, Ïó¥ = dieci, Î™Ö = classificatore per persone",
    explanation: "ÍµêÏã§Ïóê ÌïôÏÉùÏù¥ Ïó¥ Î™Ö ÏûàÏñ¥Ïöî - Con i numeri il classificatore (Î™Ö) viene dopo il numero: numero + classificatore."
  },
  {
    italian: "C'√® un tavolo libero qui?",
    korean: ["Ïó¨Í∏∞", "Ïóê", "Îπà", "ÏûêÎ¶¨", "Í∞Ä", "ÏûàÏñ¥Ïöî"],
    words: ["Ïó¨Í∏∞", "Ïóê", "Îπà", "ÏûêÎ¶¨", "Í∞Ä", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Îäî"],
    particles: { "Ïóê": "luogo", "Í∞Ä": "sogg" },
    hint: "Ïó¨Í∏∞ = qui, Îπà ÏûêÎ¶¨ = posto/tavolo libero, ÏûàÏñ¥Ïöî? = c'√®?",
    explanation: "Ïó¨Í∏∞Ïóê Îπà ÏûêÎ¶¨Í∞Ä ÏûàÏñ¥Ïöî? - luogo + Ïóê + soggetto + Ïù¥/Í∞Ä + ÏûàÏñ¥Ïöî? per chiedere 'c'√®...?'. Ïóê dopo Ïó¨Í∏∞ si pu√≤ anche omettere."
  },
  {
    italian: "Qui non ci sono posti liberi.",
    korean: ["Ïó¨Í∏∞", "Ïóê", "Îπà", "ÏûêÎ¶¨", "Í∞Ä", "ÏóÜÏñ¥Ïöî"],
    words: ["Ïó¨Í∏∞", "Ïóê", "Îπà", "ÏûêÎ¶¨", "Í∞Ä", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Îäî"],
    particles: { "Ïóê": "luogo", "Í∞Ä": "sogg" },
    hint: "ÏóÜÏñ¥Ïöî = non c'√® / non ci sono",
    explanation: "Ïó¨Í∏∞Ïóê Îπà ÏûêÎ¶¨Í∞Ä ÏóÜÏñ¥Ïöî - Negazione di ÏûàÏñ¥Ïöî: ÏóÜÎã§ = non esserci, non esistere."
  },
  {
    italian: "Lo studente √® in classe.",
    korean: ["ÌïôÏÉù", "Ïù¥", "ÍµêÏã§", "Ïóê", "ÏûàÏñ¥Ïöî"],
    words: ["ÌïôÏÉù", "Ïù¥", "ÍµêÏã§", "Ïóê", "ÏûàÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïù¥": "sogg", "Ïóê": "luogo" },
    hint: "ÌïôÏÉù = studente, ÍµêÏã§ = classe",
    explanation: "ÌïôÏÉùÏù¥ ÍµêÏã§Ïóê ÏûàÏñ¥Ïöî - Soggetto + Ïù¥/Í∞Ä + luogo + Ïóê + ÏûàÏñ¥Ïöî per dire 'X √® in Y'."
  },
  {
    italian: "Lo studente non √® in classe.",
    korean: ["ÌïôÏÉù", "Ïù¥", "ÍµêÏã§", "Ïóê", "ÏóÜÏñ¥Ïöî"],
    words: ["ÌïôÏÉù", "Ïù¥", "ÍµêÏã§", "Ïóê", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïù¥": "sogg", "Ïóê": "luogo" },
    hint: "ÏóÜÏñ¥Ïöî = non c'√® / non √® (l√¨)",
    explanation: "ÌïôÏÉùÏù¥ ÍµêÏã§Ïóê ÏóÜÏñ¥Ïöî - Stessa struttura di ÏûàÏñ¥Ïöî, ma con ÏóÜÏñ¥Ïöî per dire che non √® presente nel luogo."
  },
  {
    italian: "Dov'√® l'insegnante?",
    korean: ["ÏÑ†ÏÉùÎãò", "Ïù¥", "Ïñ¥Îîî", "Ïóê", "ÏûàÏñ¥Ïöî"],
    words: ["ÏÑ†ÏÉùÎãò", "Ïù¥", "Ïñ¥Îîî", "Ïóê", "ÏûàÏñ¥Ïöî", "ÏòàÏöî", "Î•º", "Îäî"],
    particles: { "Ïù¥": "sogg", "Ïóê": "luogo" },
    hint: "Ïñ¥ÎîîÏóê ÏûàÏñ¥Ïöî? = dov'√® (in che posto)?",
    explanation: "ÏÑ†ÏÉùÎãòÏù¥ Ïñ¥ÎîîÏóê ÏûàÏñ¥Ïöî? - Soggetto + Ïù¥/Í∞Ä + Ïñ¥ÎîîÏóê + ÏûàÏñ¥Ïöî? per chiedere dove si trova una persona o una cosa."
  },
  {
    italian: "Il libro √® in classe.",
    korean: ["Ï±Ö", "Ïù¥", "ÍµêÏã§", "Ïóê", "ÏûàÏñ¥Ïöî"],
    words: ["Ï±Ö", "Ïù¥", "ÍµêÏã§", "Ïóê", "ÏûàÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïù¥": "sogg", "Ïóê": "luogo" },
    hint: "Ï±Ö = libro",
    explanation: "Ï±ÖÏù¥ ÍµêÏã§Ïóê ÏûàÏñ¥Ïöî - Puoi anche dire ÍµêÏã§Ïóê Ï±ÖÏù¥ ÏûàÏñ¥Ïöî, ma la struttura delle particelle non cambia."
  },
  {
    italian: "Ho tempo.",
    korean: ["ÏãúÍ∞Ñ", "Ïù¥", "ÏûàÏñ¥Ïöî"],
    words: ["ÏãúÍ∞Ñ", "Ïù¥", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïù¥": "sogg" },
    hint: "ÏãúÍ∞Ñ = tempo, ÏûàÏñ¥Ïöî con concetti astratti pu√≤ significare 'ho ...'",
    explanation: "ÏãúÍ∞ÑÏù¥ ÏûàÏñ¥Ïöî - Letteralmente 'tempo c'√®', usato come 'ho tempo'."
  },
  {
    italian: "Non ho soldi.",
    korean: ["Îèà", "Ïù¥", "ÏóÜÏñ¥Ïöî"],
    words: ["Îèà", "Ïù¥", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïù¥": "sogg" },
    hint: "Îèà = soldi, ÏóÜÏñ¥Ïöî = non ho / non c'√®",
    explanation: "ÎèàÏù¥ ÏóÜÏñ¥Ïöî - Letteralmente 'soldi non ci sono', significa 'non ho soldi'."
  },
  {
    italian: "√à uno studente.",
    korean: ["ÌïôÏÉù", "Ïù¥ÏóêÏöî"],
    words: ["ÌïôÏÉù", "Ïù¥ÏóêÏöî", "ÏòàÏöî", "Ïù¥", "Í∞Ä"],
    particles: {},
    hint: "ÌïôÏÉù = studente, Ïù¥ÏóêÏöî/ÏòàÏöî = √® (forma cortese)",
    explanation: "ÌïôÏÉùÏù¥ÏóêÏöî - Ïù¥Îã§ nella forma cortese Ïù¥ÏóêÏöî per dire '√® ...' con un nome che finisce in consonante."
  },
  {
    italian: "Non √® un insegnante.",
    korean: ["ÏÑ†ÏÉùÎãò", "Ïù¥", "ÏïÑÎãàÏóêÏöî"],
    words: ["ÏÑ†ÏÉùÎãò", "Ïù¥", "ÏïÑÎãàÏóêÏöî", "ÏòàÏöî", "Î•º", "Îäî"],
    particles: { "Ïù¥": "sogg" },
    hint: "ÏïÑÎãàÎã§ = non essere, si usa con Ïù¥/Í∞Ä",
    explanation: "ÏÑ†ÏÉùÎãòÏù¥ ÏïÑÎãà‡§Ø‡•áÏöî - Struttura: nome + Ïù¥/Í∞Ä + ÏïÑÎãàÏóêÏöî per dire 'non √® ...'."
  },
  {
    italian: "Io non sono italiano.",
    korean: ["Ï†Ä", "Îäî", "Ïù¥ÌÉàÎ¶¨ÏïÑ", "ÏÇ¨Îûå", "Ïù¥", "ÏïÑÎãàÏóêÏöî"],
    words: ["Ï†Ä", "Îäî", "Ïù¥ÌÉàÎ¶¨ÏïÑ", "ÏÇ¨Îûå", "Ïù¥", "ÏïÑÎãàÏóêÏöî", "ÏòàÏöî"],
    particles: { "Îäî": "tema", "Ïù¥": "sogg (con ÏïÑÎãàÎã§)" },
    hint: "Ïù¥ÌÉàÎ¶¨ÏïÑ ÏÇ¨Îûå = italiano (persona), Ï†ÄÎäî = quanto a me",
    explanation: "Ï†ÄÎäî Ïù¥ÌÉàÎ¶¨ÏïÑ ÏÇ¨ÎûåÏù¥ ÏïÑÎãàÏóêÏöî - Îäî marca il tema 'io', Ïù¥/Í∞Ä prima di ÏïÑÎãàÏóêÏöî marca ci√≤ che 'non √®'."
  },
  {
    italian: "Sei coreano?",
    korean: ["ÌïúÍµ≠", "ÏÇ¨Îûå", "Ïù¥ÏóêÏöî"],
    words: ["ÌïúÍµ≠", "ÏÇ¨Îûå", "Ïù¥ÏóêÏöî", "ÏòàÏöî", "Ïù¥", "Í∞Ä"],
    particles: {},
    hint: "ÌïúÍµ≠ ÏÇ¨Îûå = persona coreana",
    explanation: "ÌïúÍµ≠ ÏÇ¨ÎûåÏù¥ÏóêÏöî? - Domanda con intonazione, stessa struttura di '√® ...?' usando Ïù¥ÏóêÏöî."
  },
  {
    italian: "S√¨, sono coreano.",
    korean: ["ÎÑ§", "Ï†Ä", "Îäî", "ÌïúÍµ≠", "ÏÇ¨Îûå", "Ïù¥ÏóêÏöî"],
    words: ["ÎÑ§", "ÏïÑÎãàÏöî", "Ï†Ä", "Îäî", "ÌïúÍµ≠", "ÏÇ¨Îûå", "Ïù¥ÏóêÏöî"],
    particles: { "Îäî": "tema" },
    hint: "ÎÑ§ = s√¨, Ï†ÄÎäî = quanto a me",
    explanation: "ÎÑ§, Ï†ÄÎäî ÌïúÍµ≠ ÏÇ¨ÎûåÏù¥ÏóêÏöî - Risposta affermativa usando la stessa struttura di identificazione con Ïù¥Îã§."
  },
  {
    italian: "No, non sono coreano.",
    korean: ["ÏïÑÎãàÏöî", "Ï†Ä", "Îäî", "ÌïúÍµ≠", "ÏÇ¨Îûå", "Ïù¥", "ÏïÑÎãàÏóêÏöî"],
    words: ["ÎÑ§", "ÏïÑÎãàÏöî", "Ï†Ä", "Îäî", "ÌïúÍµ≠", "ÏÇ¨Îûå", "Ïù¥", "ÏïÑÎãàÏóêÏöî"],
    particles: { "Îäî": "tema", "Ïù¥": "sogg (con ÏïÑÎãàÎã§)" },
    hint: "ÏïÑÎãàÏöî = no (come risposta), ÏïÑÎãàÏóêÏöî = non √®",
    explanation: "ÏïÑÎãàÏöî, Ï†ÄÎäî ÌïúÍµ≠ ÏÇ¨ÎûåÏù¥ ÏïÑÎãàÏóêÏöî - Combinazione di risposta negativa (ÏïÑÎãàÏöî) e verbo ÏïÑÎãàÎã§ in forma cortese."
  },
{
    italian: "C'√® una matita sul tavolo.",
    korean: ["Ï±ÖÏÉÅ", "ÏúÑ", "Ïóê", "Ïó∞ÌïÑ", "Ïù¥", "ÏûàÏñ¥Ïöî"],
    words: ["Ï±ÖÏÉÅ", "ÏúÑ", "Ïóê", "Ïó∞ÌïÑ", "Ïù¥", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïóê": "luogo", "Ïù¥": "sogg" },
    hint: "Ï±ÖÏÉÅ ÏúÑÏóê = sopra il tavolo.",
    explanation: "Ï±ÖÏÉÅ ÏúÑÏóê Ïó∞ÌïÑÏù¥ ÏûàÏñ¥Ïöî - luogo + Ïóê + soggetto + Ïù¥/Í∞Ä + ÏûàÏñ¥Ïöî."
  },
  {
    italian: "Non c'√® una matita sul tavolo.",
    korean: ["Ï±ÖÏÉÅ", "ÏúÑ", "Ïóê", "Ïó∞ÌïÑ", "Ïù¥", "ÏóÜÏñ¥Ïöî"],
    words: ["Ï±ÖÏÉÅ", "ÏúÑ", "Ïóê", "Ïó∞ÌïÑ", "Ïù¥", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïóê": "luogo", "Ïù¥": "sogg" },
    hint: "Stessa struttura, ma con ÏóÜÏñ¥Ïöî.",
    explanation: "Ï±ÖÏÉÅ ÏúÑÏóê Ïó∞ÌïÑÏù¥ ÏóÜÏñ¥Ïöî - 'Sopra il tavolo non c'√® la matita'."
  },
  {
    italian: "Ci sono molti studenti qui.",
    korean: ["Ïó¨Í∏∞", "Ïóê", "ÌïôÏÉù", "Ïù¥", "ÎßéÏù¥", "ÏûàÏñ¥Ïöî"],
    words: ["Ïó¨Í∏∞", "Ïóê", "ÌïôÏÉù", "Ïù¥", "ÎßéÏù¥", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïóê": "luogo", "Ïù¥": "sogg" },
    hint: "ÎßéÏù¥ = molto / in gran numero.",
    explanation: "Ïó¨Í∏∞Ïóê ÌïôÏÉùÏù¥ ÎßéÏù¥ ÏûàÏñ¥Ïöî - 'Qui ci sono molti studenti'. Ïóê dopo Ïó¨Í∏∞ si pu√≤ omettere."
  },
  {
    italian: "In classe non c'√® nessuno.",
    korean: ["ÍµêÏã§", "Ïóê", "ÏÇ¨Îûå", "Ïù¥", "ÏóÜÏñ¥Ïöî"],
    words: ["ÍµêÏã§", "Ïóê", "ÏÇ¨Îûå", "Ïù¥", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïóê": "luogo", "Ïù¥": "sogg" },
    hint: "ÏÇ¨Îûå = persona / gente.",
    explanation: "ÍµêÏã§Ïóê ÏÇ¨ÎûåÏù¥ ÏóÜÏñ¥Ïöî - letteralmente 'in classe non ci sono persone'."
  },
  {
    italian: "Ho un fratello maggiore.",
    korean: ["Ïò§Îπ†", "Í∞Ä", "ÏûàÏñ¥Ïöî"],
    words: ["Ïò§Îπ†", "Í∞Ä", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Í∞Ä": "sogg" },
    hint: "Ïò§Îπ† = fratello maggiore (per una donna).",
    explanation: "Ïò§Îπ†Í∞Ä ÏûàÏñ¥Ïöî - 'c'√® un fratello maggiore' ‚Üí 'ho un fratello maggiore'."
  },
  {
    italian: "Non ho sorella maggiore.",
    korean: ["Ïñ∏Îãà", "Í∞Ä", "ÏóÜÏñ¥Ïöî"],
    words: ["Ïñ∏Îãà", "Í∞Ä", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Í∞Ä": "sogg" },
    hint: "Ïñ∏Îãà = sorella maggiore (per una donna).",
    explanation: "Ïñ∏ÎãàÍ∞Ä ÏóÜÏñ¥Ïöî - 'sorella maggiore non c'√®' ‚Üí 'non ho una sorella maggiore'."
  },
  {
    italian: "Nel frigorifero c'√® acqua.",
    korean: ["ÎÉâÏû•Í≥†", "Ïóê", "Î¨º", "Ïù¥", "ÏûàÏñ¥Ïöî"],
    words: ["ÎÉâÏû•Í≥†", "Ïóê", "Î¨º", "Ïù¥", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïóê": "luogo", "Ïù¥": "sogg" },
    hint: "ÎÉâÏû•Í≥† = frigorifero, Î¨º = acqua.",
    explanation: "ÎÉâÏû•Í≥†Ïóê Î¨ºÏù¥ ÏûàÏñ¥Ïöî - 'Nel frigo c'√® acqua'."
  },
  {
    italian: "Nel frigorifero non c'√® acqua.",
    korean: ["ÎÉâÏû•Í≥†", "Ïóê", "Î¨º", "Ïù¥", "ÏóÜÏñ¥Ïöî"],
    words: ["ÎÉâÏû•Í≥†", "Ïóê", "Î¨º", "Ïù¥", "ÏûàÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî", "Î•º", "Îäî"],
    particles: { "Ïóê": "luogo", "Ïù¥": "sogg" },
    hint: "Stessa frase, negata.",
    explanation: "ÎÉâÏû•Í≥†Ïóê Î¨ºÏù¥ ÏóÜÏñ¥Ïöî - 'Nel frigo non c'√® acqua'."
  },
  {
    italian: "Io vedo il libro.",
    korean: ["Ï†Ä", "Îäî", "Ï±Ö", "ÏùÑ", "Î¥êÏöî"],
    words: ["Ï†Ä", "Îäî", "Ï±Ö", "ÏùÑ", "Î¥êÏöî", "Í∞Ä", "Ïù¥"],
    particles: { "Îäî": "tema", "ÏùÑ": "oggetto" },
    hint: "Ï†Ä = io, Ï±Ö = libro, ÏùÑ dopo vocale per oggetto diretto.",
    explanation: "Ï†ÄÎäî Ï±ÖÏùÑ Î¥êÏöî - Tema (io) + particella Îäî + oggetto (libro) + ÏùÑ + verbo. Îäî marca il tema, ÏùÑ marca l'oggetto."
  },
  {
    italian: "Il cane mangia la mela.",
    korean: ["Í∞ú", "Í∞Ä", "ÏÇ¨Í≥º", "Î•º", "Î®πÏñ¥Ïöî"],
    words: ["Í∞ú", "Í∞Ä", "ÏÇ¨Í≥º", "Î•º", "Î®πÏñ¥Ïöî", "Îäî", "ÏùÑ"],
    particles: { "Í∞Ä": "sogg", "Î•º": "oggetto" },
    hint: "Í∞ú = cane, ÏÇ¨Í≥º = mela, Í∞Ä per soggetto nuovo, Î•º dopo vocale.",
    explanation: "Í∞úÍ∞Ä ÏÇ¨Í≥ºÎ•º Î®πÏñ¥Ïöî - Soggetto + Í∞Ä (focus) + oggetto + Î•º + verbo. Í∞Ä introduce soggetto nuovo nel discorso."
  },
  {
    italian: "Io ho una penna.",
    korean: ["Ï†Ä", "Îäî", "Ìéú", "Ïù¥", "ÏûàÏñ¥Ïöî"],
    words: ["Ï†Ä", "Îäî", "Ìéú", "Ïù¥", "ÏûàÏñ¥Ïöî", "Í∞Ä", "ÏùÑ"],
    particles: { "Îäî": "tema", "Ïù¥": "sogg" },
    hint: "Ìéú = penna, Ï†ÄÎäî = quanto a me (tema), Ïù¥ per soggetto del possesso.",
    explanation: "Ï†ÄÎäî ÌéúÏù¥ ÏûàÏñ¥Ïöî - Tema (io) + Îäî + oggetto posseduto + Ïù¥/Í∞Ä + ÏûàÏñ¥Ïöî per esprimere possesso."
  },
  {
    italian: "Mia sorella ha un libro.",
    korean: ["Ïñ∏Îãà", "Í∞Ä", "Ï±Ö", "Ïù¥", "ÏûàÏñ¥Ïöî"],
    words: ["Ïñ∏Îãà", "Í∞Ä", "Ï±Ö", "Ïù¥", "ÏûàÏñ¥Ïöî", "Îäî", "ÏùÑ"],
    particles: { "Í∞Ä": "sogg", "Ïù¥": "sogg" },
    hint: "Ïñ∏Îãà = sorella maggiore, Í∞Ä per possessore, Ïù¥ per cosa posseduta.",
    explanation: "Ïñ∏ÎãàÍ∞Ä Ï±ÖÏù¥ ÏûàÏñ¥Ïöî - Possessore + Í∞Ä + posseduto + Ïù¥/Í∞Ä + ÏûàÏñ¥Ïöî. Entrambi prendono particelle soggetto."
  },
  {
    italian: "Dov'√® il mio libro?",
    korean: ["Ï†ú", "Ï±Ö", "Ïù¥", "Ïñ¥Îîî", "Ïóê", "ÏûàÏñ¥Ïöî"],
    words: ["Ï†ú", "Ï±Ö", "Ïù¥", "Ïñ¥Îîî", "Ïóê", "ÏûàÏñ¥Ïöî", "Í∞Ä", "Î•º"],
    particles: { "Ïù¥": "sogg", "Ïóê": "luogo" },
    hint: "Ï†ú = mio, Ïñ¥ÎîîÏóê ÏûàÏñ¥Ïöî? = dov'√®?",
    explanation: "Ï†ú Ï±ÖÏù¥ Ïñ¥ÎîîÏóê ÏûàÏñ¥Ïöî? - Ï†ú marca possessivo, Ïù¥ per soggetto, Ïñ¥ÎîîÏóê + ÏûàÏñ¥Ïöî per chiedere posizione."
  },
  {
    italian: "Io leggo il giornale di Marco.",
    korean: ["Ï†Ä", "Îäî", "ÎßàÎ•¥ÏΩî", "Í∞Ä", "Ïã†Î¨∏", "ÏùÑ", "Î¥êÏöî"],
    words: ["Ï†Ä", "Îäî", "ÎßàÎ•¥ÏΩî", "Í∞Ä", "Ïã†Î¨∏", "ÏùÑ", "Î¥êÏöî"],
    particles: { "Îäî": "tema", "Í∞Ä": "sogg", "ÏùÑ": "oggetto" },
    hint: "Ïã†Î¨∏ = giornale, ÎßàÎ•¥ÏΩîÍ∞Ä Ïã†Î¨∏ = il giornale di Marco.",
    explanation: "Ï†ÄÎäî ÎßàÎ•¥ÏΩîÍ∞Ä Ïã†Î¨∏ ÏùÑ Î¥êÏöî - Possesso con Í∞Ä, io (tema) + Îäî, oggetto + ÏùÑ."
  },
  {
    italian: "La mamma compra il latte per il bambino.",
    korean: ["ÏóÑÎßà", "Í∞Ä", "ÏïÑÍ∏∞", "Î•º", "ÏúÑÌï¥", "Ïö∞Ïú†", "Î•º", "ÏÇ¨Ïöî"],
    words: ["ÏóÑÎßà", "Í∞Ä", "ÏïÑÍ∏∞", "Î•º", "ÏúÑÌï¥", "Ïö∞Ïú†", "Î•º", "ÏÇ¨Ïöî"],
    particles: { "Í∞Ä": "sogg", "Î•º": "oggetto", "ÏúÑÌï¥": "beneficiario" },
    hint: "ÏóÑÎßà = mamma, ÏúÑÌï¥ = per (beneficio), Îëê oggetti con Î•º.",
    explanation: "ÏóÑÎßåÍ∞Ä ÏïÑÍ∏∞Î•º ÏúÑÌï¥ Ïö∞Ïú†Î•º ÏÇ¨Ïöî - Soggetto + Í∞Ä, beneficiario + Î•º + ÏúÑÌï¥, oggetto + Î•º."
  },
  {
    italian: "Tu conosci il professore?",
    korean: ["ÎÑà", "Îäî", "ÏÑ†ÏÉùÎãò", "ÏùÑ", "ÏïåÏïÑÏöî"],
    words: ["ÎÑà", "Îäî", "ÏÑ†ÏÉùÎãò", "ÏùÑ", "ÏïåÏïÑÏöî", "Í∞Ä", "Ïù¥"],
    particles: { "Îäî": "tema", "ÏùÑ": "oggetto" },
    hint: "ÎÑà = tu, ÏÑ†ÏÉùÎãò = professore, ÏïåÎã§ = conoscere.",
    explanation: "ÎÑàÎäî ÏÑ†ÏÉùÎãòÏùÑ ÏïåÏïÑÏöî? - Tema (tu) + Îäî + oggetto conosciuto + ÏùÑ + ÏïåÎã§."
  },
  {
    italian: "Dov'√® la borsa di mia madre?",
    korean: ["ÏóÑÎßà", "Í∞Ä", "Í∞ÄÎ∞©", "Ïù¥", "Ïñ¥Îîî", "Ïóê", "ÏûàÏñ¥Ïöî"],
    words: ["ÏóÑÎßà", "Í∞Ä", "Í∞ÄÎ∞©", "Ïù¥", "Ïñ¥Îîî", "Ïóê", "ÏûàÏñ¥Ïöî"],
    particles: { "Í∞Ä": "sogg", "Ïù¥": "sogg", "Ïóê": "luogo" },
    hint: "Í∞ÄÎ∞© = borsa, ÏóÑÎßàÍ∞Ä Í∞ÄÎ∞© = borsa di mamma.",
    explanation: "ÏóÑÎßàÍ∞Ä Í∞ÄÎ∞©Ïù¥ Ïñ¥ÎîîÏóê ÏûàÏñ¥Ïöî? - Possesso + dove si trova."
  },
  {
    italian: "Io non mangio carne.",
    korean: ["Ï†Ä", "Îäî", "Í≥†Í∏∞", "Î•º", "Ïïà", "Î®πÏñ¥Ïöî"],
    words: ["Ï†Ä", "Îäî", "Í≥†Í∏∞", "Î•º", "Ïïà", "Î®πÏñ¥Ïöî", "ÏóÜÏñ¥Ïöî"],
    particles: { "Îäî": "tema", "Î•º": "oggetto" },
    hint: "Í≥†Í∏∞ = carne, Ïïà + verbo = negazione.",
    explanation: "Ï†ÄÎäî Í≥†Í∏∞Î•º Ïïà Î®πÏñ¥Ïöî - Tema + Îäî + oggetto negato + Î•º + Ïïà + verbo."
  }
    ];

    let currentExercise = 0;
    let correctCount = 0;
    let wrongCount = 0;
    let droppedWords = [];
    let draggedElement = null;

    function applyStyles() {
      const appContainer = document.getElementById('app-container');
      const exerciseCard = document.getElementById('exercise-card');
      const completionScreen = document.getElementById('completion-screen');
      const checkBtn = document.getElementById('check-btn');
      const nextBtn = document.getElementById('next-btn');
      const restartBtn = document.getElementById('restart-btn');
      const progressBar = document.getElementById('progress-bar');
      const mainTitle = document.getElementById('main-title');
      const particleLegend = document.getElementById('particle-legend');

      appContainer.style.background = `linear-gradient(135deg, ${config.background_color} 0%, ${config.secondary_action_color} 100%)`;
      appContainer.style.color = config.text_color;
      
      exerciseCard.style.background = config.surface_color;
      exerciseCard.style.color = config.text_color;
      
      completionScreen.style.background = config.surface_color;
      completionScreen.style.color = config.text_color;
      
      checkBtn.style.background = config.primary_action_color;
      checkBtn.style.color = config.text_color;
      
      nextBtn.style.background = config.primary_action_color;
      nextBtn.style.color = config.text_color;
      
      restartBtn.style.background = config.primary_action_color;
      restartBtn.style.color = config.text_color;
      
      progressBar.style.background = config.primary_action_color;
      
      mainTitle.textContent = config.app_title;
      mainTitle.style.color = config.text_color;
      
      particleLegend.style.background = config.secondary_action_color;
      particleLegend.style.color = config.text_color;
    }

    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function createWordElement(word, particles, inDropZone = false) {
      const wrapper = document.createElement('div');
      wrapper.className = 'relative';
      
      const el = document.createElement('div');
      el.className = 'drag-item px-4 py-2 rounded-lg font-bold text-lg transition-all hover:scale-105';
      el.style.background = config.secondary_action_color;
      el.style.color = config.text_color;
      el.textContent = word;
      el.dataset.word = word;
      el.draggable = true;
      
      if (particles && particles[word]) {
        const tag = document.createElement('span');
        tag.className = 'particle-tag';
        tag.style.background = config.primary_action_color;
        tag.style.color = config.text_color;
        const labels = {
          'sogg': 'S',
          'oggetto': 'O',
          'luogo': 'L',
          'luogo-az': 'L-az',
          'poss': 'P',
          'essere': 'Ïù¥Îã§',
          'esiste': 'ÏûàÎã§',
          'non-essere': 'ÏïÑÎãàÎã§'
        };
        tag.textContent = labels[particles[word]] || particles[word];
        wrapper.appendChild(tag);
      }
      
      el.addEventListener('dragstart', handleDragStart);
      el.addEventListener('dragend', handleDragEnd);
      el.addEventListener('touchstart', handleTouchStart, { passive: false });
      el.addEventListener('touchmove', handleTouchMove, { passive: false });
      el.addEventListener('touchend', handleTouchEnd);
      
      wrapper.appendChild(el);
      return wrapper;
    }

    function handleDragStart(e) {
      draggedElement = e.target.closest('.drag-item');
      if (!draggedElement) return;
      draggedElement.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
      e.dataTransfer.setData('text/html', draggedElement.innerHTML);
    }

    function handleDragEnd(e) {
      if (draggedElement) {
        draggedElement.classList.remove('dragging');
      }
      draggedElement = null;
    }

    let touchStartY = 0;
    let touchElement = null;

    function handleTouchStart(e) {
      e.preventDefault();
      touchElement = e.target.closest('.drag-item');
      if (!touchElement) return;
      
      const touch = e.touches[0];
      touchStartY = touch.clientY;
      touchElement.style.opacity = '0.7';
      touchElement.style.transform = 'scale(1.1)';
    }

    function handleTouchMove(e) {
      e.preventDefault();
    }

    function handleTouchEnd(e) {
      if (!touchElement) return;
      
      const touch = e.changedTouches[0];
      const dropZone = document.getElementById('drop-zone');
      const wordBank = document.getElementById('word-bank');
      
      const dropRect = dropZone.getBoundingClientRect();
      const bankRect = wordBank.getBoundingClientRect();
      
      touchElement.style.opacity = '1';
      touchElement.style.transform = 'scale(1)';
      
      const word = touchElement.dataset.word;
      const exercise = exercises[currentExercise];
      
      if (touch.clientY >= dropRect.top && touch.clientY <= dropRect.bottom) {
        if (!touchElement.closest('#drop-zone')) {
          droppedWords.push(word);
          renderExercise();
        }
      } else if (touch.clientY >= bankRect.top && touch.clientY <= bankRect.bottom) {
        if (touchElement.closest('#drop-zone')) {
          const index = droppedWords.indexOf(word);
          if (index > -1) {
            droppedWords.splice(index, 1);
            renderExercise();
          }
        }
      }
      
      touchElement = null;
    }

    function setupDropZone() {
      const dropZone = document.getElementById('drop-zone');
      const wordBank = document.getElementById('word-bank');
      
      dropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropZone.classList.add('drag-over');
        dropZone.style.borderColor = config.primary_action_color;
      });
      
      dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('drag-over');
        dropZone.style.borderColor = 'rgba(255,255,255,0.3)';
      });
      
      dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZone.classList.remove('drag-over');
        dropZone.style.borderColor = 'rgba(255,255,255,0.3)';
        
        if (draggedElement && !draggedElement.closest('#drop-zone')) {
          const word = draggedElement.dataset.word;
          droppedWords.push(word);
          renderExercise();
        }
      });
      
      wordBank.addEventListener('dragover', (e) => {
        e.preventDefault();
      });
      
      wordBank.addEventListener('drop', (e) => {
        e.preventDefault();
        if (draggedElement && draggedElement.closest('#drop-zone')) {
          const word = draggedElement.dataset.word;
          const index = droppedWords.indexOf(word);
          if (index > -1) {
            droppedWords.splice(index, 1);
            renderExercise();
          }
        }
      });
    }

    function renderExercise() {
      const exercise = exercises[currentExercise];
      const dropZone = document.getElementById('drop-zone');
      const wordBank = document.getElementById('word-bank');
      const questionText = document.getElementById('question-text');
      const hintText = document.getElementById('hint-text');
      const placeholder = document.getElementById('drop-placeholder');
      
      questionText.textContent = exercise.italian;
      hintText.textContent = exercise.hint;
      
      dropZone.innerHTML = '';
      if (droppedWords.length === 0) {
        const placeholderEl = document.createElement('span');
        placeholderEl.className = 'opacity-50 text-sm';
        placeholderEl.id = 'drop-placeholder';
        placeholderEl.textContent = 'Trascina qui le parole...';
        dropZone.appendChild(placeholderEl);
      } else {
        droppedWords.forEach(word => {
          dropZone.appendChild(createWordElement(word, exercise.particles, true));
        });
      }
      
      wordBank.innerHTML = '';
      const availableWords = exercise.words.filter(w => !droppedWords.includes(w));
      shuffleArray(availableWords).forEach(word => {
        wordBank.appendChild(createWordElement(word, exercise.particles));
      });
      
      document.getElementById('progress-text').textContent = `${currentExercise + 1} / ${exercises.length}`;
      document.getElementById('progress-bar').style.width = `${((currentExercise + 1) / exercises.length) * 100}%`;
      
      document.getElementById('feedback').classList.add('hidden');
      document.getElementById('explanation').classList.add('hidden');
      document.getElementById('check-btn').classList.remove('hidden');
      document.getElementById('next-btn').classList.add('hidden');
    }

    function checkAnswer() {
      const exercise = exercises[currentExercise];
      const isCorrect = JSON.stringify(droppedWords) === JSON.stringify(exercise.korean);
      
      const feedback = document.getElementById('feedback');
      const explanation = document.getElementById('explanation');
      
      feedback.classList.remove('hidden');
      feedback.classList.remove('animate-bounce-in', 'animate-shake');
      
      if (isCorrect) {
        correctCount++;
        document.getElementById('correct-count').textContent = correctCount;
        feedback.textContent = config.correct_message;
        feedback.style.background = '#10b981';
        feedback.classList.add('animate-bounce-in');
      } else {
        wrongCount++;
        document.getElementById('wrong-count').textContent = wrongCount;
        feedback.textContent = config.incorrect_message + ` La risposta corretta √®: ${exercise.korean.join(' ')}`;
        feedback.style.background = config.primary_action_color;
        feedback.classList.add('animate-shake');
      }
      
      explanation.classList.remove('hidden');
      explanation.style.background = config.secondary_action_color;
      explanation.innerHTML = `<strong>üìñ Spiegazione:</strong> ${exercise.explanation}`;
      
      document.getElementById('check-btn').classList.add('hidden');
      document.getElementById('next-btn').classList.remove('hidden');
    }

    function nextExercise() {
      currentExercise++;
      droppedWords = [];
      
      if (currentExercise >= exercises.length) {
        showCompletion();
      } else {
        renderExercise();
      }
    }

    function showCompletion() {
      document.getElementById('exercise-card').classList.add('hidden');
      document.getElementById('completion-screen').classList.remove('hidden');
      document.getElementById('final-score').textContent = `${correctCount}/${exercises.length}`;
    }

    function resetExercise() {
      droppedWords = [];
      renderExercise();
    }

    function restartQuiz() {
      currentExercise = 0;
      correctCount = 0;
      wrongCount = 0;
      droppedWords = [];
      
      document.getElementById('correct-count').textContent = '0';
      document.getElementById('wrong-count').textContent = '0';
      document.getElementById('exercise-card').classList.remove('hidden');
      document.getElementById('completion-screen').classList.add('hidden');
      
      renderExercise();
    }

    async function onConfigChange(newConfig) {
      config = { ...defaultConfig, ...newConfig };
      applyStyles();
    }

    function mapToCapabilities(cfg) {
      return {
        recolorables: [
          {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (v) => { cfg.background_color = v; window.elementSdk.setConfig({ background_color: v }); }
          },
          {
            get: () => cfg.surface_color || defaultConfig.surface_color,
            set: (v) => { cfg.surface_color = v; window.elementSdk.setConfig({ surface_color: v }); }
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (v) => { cfg.text_color = v; window.elementSdk.setConfig({ text_color: v }); }
          },
          {
            get: () => cfg.primary_action_color || defaultConfig.primary_action_color,
            set: (v) => { cfg.primary_action_color = v; window.elementSdk.setConfig({ primary_action_color: v }); }
          },
          {
            get: () => cfg.secondary_action_color || defaultConfig.secondary_action_color,
            set: (v) => { cfg.secondary_action_color = v; window.elementSdk.setConfig({ secondary_action_color: v }); }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => cfg.font_family || 'Noto Sans KR',
          set: (v) => { cfg.font_family = v; window.elementSdk.setConfig({ font_family: v }); }
        },
        fontSizeable: {
          get: () => cfg.font_size || 16,
          set: (v) => { cfg.font_size = v; window.elementSdk.setConfig({ font_size: v }); }
        }
      };
    }

    function mapToEditPanelValues(cfg) {
      return new Map([
        ['app_title', cfg.app_title || defaultConfig.app_title],
        ['correct_message', cfg.correct_message || defaultConfig.correct_message],
        ['incorrect_message', cfg.incorrect_message || defaultConfig.incorrect_message]
      ]);
    }

    document.getElementById('check-btn').addEventListener('click', checkAnswer);
    document.getElementById('reset-btn').addEventListener('click', resetExercise);
    document.getElementById('next-btn').addEventListener('click', nextExercise);
    document.getElementById('restart-btn').addEventListener('click', restartQuiz);

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    setupDropZone();
    applyStyles();
    renderExercise();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c94524ab56c0e6f',t:'MTc3MDMxNDU3NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>